{"ast":null,"code":"import Axios from \"axios\";\nimport { ADD_USER, GET_ALL_USER, DELETE_USER, LOGIN_USER, LOGOUT_USER } from \"./types\";\n/* add  user */\n\nexport const addUser = payload => ({\n  type: ADD_USER,\n  payload\n});\nexport function postUser(el) {\n  return dispatch => Axios.post(`http://localhost:8000/users/`, {\n    _id: el._id,\n    name: el.name,\n    cin: el.cin,\n    adress: el.adress,\n    tel: el.tel,\n    mail: el.mail,\n    pass: el.pass,\n    role: el.role\n  }).then(res => dispatch(addUser(el))).catch(err => console.log(err));\n} // Get users\n\nexport const getAlluser = payload => ({\n  type: GET_ALL_USER,\n  payload: payload\n});\nexport function GetUsersFromApi() {\n  return dispatch => Axios.get(\"http://localhost:8000/users/\").then(res => {\n    console.log(\"slt\", res.data); // localStorage.setItem(\"id\", res.data._id);\n\n    dispatch(getAlluser(res.data));\n  });\n} // Connect users\n\nexport const connectUser = payload => ({\n  type: LOGIN_USER,\n  payload: payload\n});\nexport function connectUserFromApi(cin, pass) {\n  return dispatch => Axios.post(`http://localhost:8000/users/login`, {\n    cin: cin,\n    pass: pass\n  }).then(res => {\n    console.log(res.data);\n\n    if (res.data) {\n      localStorage.setItem(\"token\", res.data);\n      window.location.pathname = \"/home\";\n    }\n\n    const payload = JwtDecode(token);\n    dispatch.connectUser;\n  }).catch(err => console.log(err));\n} // deconnect user  31/8\n\nexport const logoutUser = () => {\n  const action = {\n    type: LOGOUT_USER,\n    user: \"none\"\n  };\n  return action;\n};\n/* delete user */\n\nexport const deleteUser = payload => ({\n  type: DELETE_USER,\n  payload\n});\nexport function deleteUserFromApi(_id) {\n  return dispatch => Axios.delete(\"http://localhost:8000/users/\" + _id).then(res => dispatch(GetUsersFromApi()));\n}","map":{"version":3,"sources":["/home/salim/Bureau/Gorbej-app-test/src/Action/userActions.js"],"names":["Axios","ADD_USER","GET_ALL_USER","DELETE_USER","LOGIN_USER","LOGOUT_USER","addUser","payload","type","postUser","el","dispatch","post","_id","name","cin","adress","tel","mail","pass","role","then","res","catch","err","console","log","getAlluser","GetUsersFromApi","get","data","connectUser","connectUserFromApi","localStorage","setItem","window","location","pathname","JwtDecode","token","logoutUser","action","user","deleteUser","deleteUserFromApi","delete"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport { ADD_USER, GET_ALL_USER, DELETE_USER, LOGIN_USER, LOGOUT_USER } from \"./types\";\n\n/* add  user */\n\nexport const addUser = (payload) => ({\n  type: ADD_USER,\n  payload,\n});\n\nexport function postUser(el) {\n  return (dispatch) =>\n    Axios.post(`http://localhost:8000/users/`, {\n      _id: el._id,\n      name: el.name,\n      cin: el.cin,\n      adress: el.adress,\n      tel: el.tel,\n      mail: el.mail,\n      pass: el.pass,\n      role: el.role,\n    })\n      .then((res) => dispatch(addUser(el)))\n      .catch((err) => console.log(err));\n}\n\n// Get users\n\nexport const getAlluser = (payload) => ({\n  type: GET_ALL_USER,\n  payload: payload,\n});\n\nexport function GetUsersFromApi() {\n  return (dispatch) =>\n    Axios.get(\"http://localhost:8000/users/\").then((res) => {\n      console.log(\"slt\", res.data);\n      // localStorage.setItem(\"id\", res.data._id);\n      dispatch(getAlluser(res.data));\n    });\n}\n\n// Connect users\n\nexport const connectUser = (payload) => ({\n  type: LOGIN_USER,\n  payload: payload,\n});\n\nexport function connectUserFromApi(cin, pass) {\n  return (dispatch) =>\n    Axios.post(`http://localhost:8000/users/login`, {\n      cin: cin,\n      pass: pass,\n    })\n      .then((res) => {\n        console.log(res.data);\n        if (res.data){\n        localStorage.setItem(\"token\", res.data);\n        window.location.pathname = \"/home\";\n        }\n        const payload = JwtDecode(token);\n        dispatch.connectUser\n      })\n      .catch((err) => console.log(err));\n}\n\n// deconnect user  31/8\n\nexport const logoutUser = () => {\n  const action = {\n    type: LOGOUT_USER,\n    user: \"none\",\n  };\n  return action;\n};\n\n/* delete user */\n\nexport const deleteUser = (payload) => ({\n  type: DELETE_USER,\n  payload,\n});\n\nexport function deleteUserFromApi(_id) {\n  return (dispatch) =>\n    Axios.delete(\"http://localhost:8000/users/\" + _id).then((res) =>\n      dispatch(GetUsersFromApi())\n    );\n}\n"]},"metadata":{},"sourceType":"module"}