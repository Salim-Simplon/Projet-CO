{"ast":null,"code":"import { GET_ALL_FOODS, SELECT_FOODS, GET_ALL_PANIER, DELETE_FOODS, PLUS_UN, MOINS_UN } from \"../Action/types\";\nimport calcReducer from './index';\nconst initialState = {\n  foods: [],\n  panier: [],\n  quantité: 1\n};\nexport default function foodReducer(state = initialState, action) {\n  if (action.type === GET_ALL_FOODS) {\n    return { ...state,\n      foods: action.payload\n    };\n  }\n\n  if (action.type === SELECT_FOODS) {\n    console.log(action.payload);\n    let x = Object(state.panier);\n    return { ...state,\n      panier: [action.payload, ...x]\n    };\n  }\n\n  if (action.type === GET_ALL_PANIER) {\n    return { ...state,\n      panier: action.payload\n    };\n  }\n\n  if (action.type === DELETE_FOODS) {\n    return state.panier.filter(panier => panier.id !== action.payload);\n  } // Nesting the reducers on PLUS_UN and MOINS_UN\n\n\n  if ([PLUS_UN, MOINS_UN].includes(action.type)) {\n    if (!action.payload.id) {\n      return state;\n    }\n\n    const index = state.panier.findIndex(({\n      id\n    }) => id === action.payload.id); // If not found, do nothing\n\n    if (index === -1) {\n      return state;\n    }\n\n    const elementsBefore = state.panier.slice(0, index); // There you have the nesting.\n\n    const updatedElement = calcReducer(state.panier[index], action);\n    const elementsAfter = state.panier.slice(index + 1);\n    return { ...state,\n      panier: [...elementsBefore, updatedElement, ...elementsAfter]\n    };\n  }\n\n  return state;\n}","map":{"version":3,"sources":["/home/salim/Bureau/Resto-app-test/src/Reducers/FoodReducer.js"],"names":["GET_ALL_FOODS","SELECT_FOODS","GET_ALL_PANIER","DELETE_FOODS","PLUS_UN","MOINS_UN","calcReducer","initialState","foods","panier","quantité","foodReducer","state","action","type","payload","console","log","x","Object","filter","id","includes","index","findIndex","elementsBefore","slice","updatedElement","elementsAfter"],"mappings":"AAAA,SACEA,aADF,EAEEC,YAFF,EAGEC,cAHF,EAIEC,YAJF,EAKEC,OALF,EAMEC,QANF,QAOO,iBAPP;AAQA,OAAOC,WAAP,MAAwB,SAAxB;AAEA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAE,EADY;AAEnBC,EAAAA,MAAM,EAAE,EAFW;AAGnBC,EAAAA,QAAQ,EAAE;AAHS,CAArB;AAMA,eAAe,SAASC,WAAT,CAAqBC,KAAK,GAAGL,YAA7B,EAA2CM,MAA3C,EAAmD;AAChE,MAAIA,MAAM,CAACC,IAAP,KAAgBd,aAApB,EAAmC;AACjC,WAAO,EACL,GAAGY,KADE;AAELJ,MAAAA,KAAK,EAAEK,MAAM,CAACE;AAFT,KAAP;AAID;;AAED,MAAIF,MAAM,CAACC,IAAP,KAAgBb,YAApB,EAAkC;AAChCe,IAAAA,OAAO,CAACC,GAAR,CAAYJ,MAAM,CAACE,OAAnB;AACA,QAAIG,CAAC,GAAGC,MAAM,CAACP,KAAK,CAACH,MAAP,CAAd;AACA,WAAO,EAAE,GAAGG,KAAL;AAAYH,MAAAA,MAAM,EAAE,CAACI,MAAM,CAACE,OAAR,EAAiB,GAAGG,CAApB;AAApB,KAAP;AACD;;AAED,MAAIL,MAAM,CAACC,IAAP,KAAgBZ,cAApB,EAAoC;AAClC,WAAO,EACL,GAAGU,KADE;AAELH,MAAAA,MAAM,EAAEI,MAAM,CAACE;AAFV,KAAP;AAID;;AACD,MAAIF,MAAM,CAACC,IAAP,KAAgBX,YAApB,EAAkC;AAChC,WAAOS,KAAK,CAACH,MAAN,CAAaW,MAAb,CAAqBX,MAAD,IAAYA,MAAM,CAACY,EAAP,KAAcR,MAAM,CAACE,OAArD,CAAP;AACD,GAtB+D,CAuBhE;;;AACA,MAAI,CAACX,OAAD,EAAUC,QAAV,EAAoBiB,QAApB,CAA6BT,MAAM,CAACC,IAApC,CAAJ,EAA+C;AAC7C,QAAI,CAACD,MAAM,CAACE,OAAP,CAAeM,EAApB,EAAwB;AACtB,aAAOT,KAAP;AACD;;AAED,UAAMW,KAAK,GAAGX,KAAK,CAACH,MAAN,CAAae,SAAb,CAAuB,CAAC;AAAEH,MAAAA;AAAF,KAAD,KAAYA,EAAE,KAAKR,MAAM,CAACE,OAAP,CAAeM,EAAzD,CAAd,CAL6C,CAM7C;;AACA,QAAIE,KAAK,KAAK,CAAC,CAAf,EAAkB;AAChB,aAAOX,KAAP;AACD;;AAED,UAAMa,cAAc,GAAGb,KAAK,CAACH,MAAN,CAAaiB,KAAb,CAAmB,CAAnB,EAAsBH,KAAtB,CAAvB,CAX6C,CAY7C;;AACA,UAAMI,cAAc,GAAGrB,WAAW,CAACM,KAAK,CAACH,MAAN,CAAac,KAAb,CAAD,EAAsBV,MAAtB,CAAlC;AACA,UAAMe,aAAa,GAAGhB,KAAK,CAACH,MAAN,CAAaiB,KAAb,CAAmBH,KAAK,GAAG,CAA3B,CAAtB;AAEA,WAAO,EACL,GAAGX,KADE;AAELH,MAAAA,MAAM,EAAE,CAAC,GAAGgB,cAAJ,EAAoBE,cAApB,EAAoC,GAAGC,aAAvC;AAFH,KAAP;AAID;;AACD,SAAOhB,KAAP;AACD","sourcesContent":["import {\n  GET_ALL_FOODS,\n  SELECT_FOODS,\n  GET_ALL_PANIER,\n  DELETE_FOODS,\n  PLUS_UN,\n  MOINS_UN,\n} from \"../Action/types\";\nimport calcReducer from './index'\n\nconst initialState = {\n  foods: [],\n  panier: [],\n  quantité: 1,\n};\n\nexport default function foodReducer(state = initialState, action) {\n  if (action.type === GET_ALL_FOODS) {\n    return {\n      ...state,\n      foods: action.payload,\n    };\n  }\n\n  if (action.type === SELECT_FOODS) {\n    console.log(action.payload);\n    let x = Object(state.panier);\n    return { ...state, panier: [action.payload, ...x] };\n  }\n\n  if (action.type === GET_ALL_PANIER) {\n    return {\n      ...state,\n      panier: action.payload,\n    };\n  }\n  if (action.type === DELETE_FOODS) {\n    return state.panier.filter((panier) => panier.id !== action.payload);\n  }\n  // Nesting the reducers on PLUS_UN and MOINS_UN\n  if ([PLUS_UN, MOINS_UN].includes(action.type)) {\n    if (!action.payload.id) {\n      return state;\n    }\n\n    const index = state.panier.findIndex(({ id }) => id === action.payload.id);\n    // If not found, do nothing\n    if (index === -1) {\n      return state;\n    }\n\n    const elementsBefore = state.panier.slice(0, index);\n    // There you have the nesting.\n    const updatedElement = calcReducer(state.panier[index], action);\n    const elementsAfter = state.panier.slice(index + 1);\n\n    return {\n      ...state,\n      panier: [...elementsBefore, updatedElement, ...elementsAfter],\n    };\n  }\n  return state;\n}\n"]},"metadata":{},"sourceType":"module"}