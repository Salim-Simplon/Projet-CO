{"ast":null,"code":"import Axios from \"axios\";\nimport { ADD_USER, GET_ALL_USER, DELETE_USER, LOGIN_USER, LOGOUT_USER } from \"./types\";\nimport JwtDecode from \"jwt-decode\";\n/* add  user */\n\nexport const addUser = payload => ({\n  type: ADD_USER,\n  payload\n});\nexport function postUser(el) {\n  return dispatch => Axios.post(`http://localhost:8000/users/`, {\n    _id: el._id,\n    name: el.name,\n    cin: el.cin,\n    adress: el.adress,\n    tel: el.tel,\n    mail: el.mail,\n    pass: el.pass,\n    role: el.role\n  }).then(res => dispatch(addUser(el))).catch(err => console.log(err));\n} // Get users\n\nexport const getAlluser = payload => ({\n  type: GET_ALL_USER,\n  payload: payload\n});\nexport function GetUsersFromApi() {\n  return dispatch => Axios.get(\"http://localhost:8000/users/\").then(res => {\n    console.log(\"slt\", res.data); // localStorage.setItem(\"id\", res.data._id);\n\n    dispatch(getAlluser(res.data));\n  });\n} // Connect users\n\nexport const connectUser = payload => ({\n  type: LOGIN_USER,\n  payload: payload\n});\nexport function connectUserFromApi(cin, pass) {\n  return dispatch => Axios.post(`http://localhost:8000/users/login`, {\n    cin: cin,\n    pass: pass\n  }).then(res => {\n    console.log(res.data);\n\n    if (res.data) {\n      localStorage.setItem(\"token\", res.data);\n      window.location.pathname = \"/home\";\n    }\n\n    const payload = JwtDecode(res.data);\n    dispatch(connectUser(payload));\n  }).catch(err => console.log(err));\n} // deconnect user  \n\nexport const logoutUser = () => {\n  localStorage.removeItem(\"token\");\n  const action = {\n    type: LOGOUT_USER,\n    user: \"none\"\n  };\n  return action;\n};\n/* delete user */\n\nexport const deleteUser = payload => ({\n  type: DELETE_USER,\n  payload\n});\nexport function deleteUserFromApi(_id) {\n  return dispatch => Axios.delete(\"http://localhost:8000/users/\" + _id).then(res => dispatch(GetUsersFromApi()));\n}","map":{"version":3,"sources":["/home/salim/Bureau/Gorbej-app-test/src/Action/userActions.js"],"names":["Axios","ADD_USER","GET_ALL_USER","DELETE_USER","LOGIN_USER","LOGOUT_USER","JwtDecode","addUser","payload","type","postUser","el","dispatch","post","_id","name","cin","adress","tel","mail","pass","role","then","res","catch","err","console","log","getAlluser","GetUsersFromApi","get","data","connectUser","connectUserFromApi","localStorage","setItem","window","location","pathname","logoutUser","removeItem","action","user","deleteUser","deleteUserFromApi","delete"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport {\n  ADD_USER,\n  GET_ALL_USER,\n  DELETE_USER,\n  LOGIN_USER,\n  LOGOUT_USER,\n} from \"./types\";\nimport JwtDecode from \"jwt-decode\";\n\n/* add  user */\n\nexport const addUser = (payload) => ({\n  type: ADD_USER,\n  payload,\n});\n\nexport function postUser(el) {\n  return (dispatch) =>\n    Axios.post(`http://localhost:8000/users/`, {\n      _id: el._id,\n      name: el.name,\n      cin: el.cin,\n      adress: el.adress,\n      tel: el.tel,\n      mail: el.mail,\n      pass: el.pass,\n      role: el.role,\n    })\n      .then((res) => dispatch(addUser(el)))\n      .catch((err) => console.log(err));\n}\n\n// Get users\n\nexport const getAlluser = (payload) => ({\n  type: GET_ALL_USER,\n  payload: payload,\n});\n\nexport function GetUsersFromApi() {\n  return (dispatch) =>\n    Axios.get(\"http://localhost:8000/users/\").then((res) => {\n      console.log(\"slt\", res.data);\n      // localStorage.setItem(\"id\", res.data._id);\n      dispatch(getAlluser(res.data));\n    });\n}\n\n// Connect users\n\nexport const connectUser = (payload) => ({\n  type: LOGIN_USER,\n  payload: payload,\n});\n\nexport function connectUserFromApi(cin, pass) {\n  return (dispatch) =>\n    Axios.post(`http://localhost:8000/users/login`, {\n      cin: cin,\n      pass: pass,\n    })\n      .then((res) => {\n        console.log(res.data);\n        if (res.data) {\n          localStorage.setItem(\"token\", res.data);\n          window.location.pathname = \"/home\";\n        }\n        const payload = JwtDecode(res.data);\n        dispatch(connectUser(payload));\n      })\n      .catch((err) => console.log(err));\n}\n\n// deconnect user  \n\nexport const logoutUser = () => {\n  localStorage.removeItem(\"token\")\n  const action = {\n    type: LOGOUT_USER,\n    user: \"none\",\n  };\n  return action;\n};\n\n/* delete user */\n\nexport const deleteUser = (payload) => ({\n  type: DELETE_USER,\n  payload,\n});\n\nexport function deleteUserFromApi(_id) {\n  return (dispatch) =>\n    Axios.delete(\"http://localhost:8000/users/\" + _id).then((res) =>\n      dispatch(GetUsersFromApi())\n    );\n}\n"]},"metadata":{},"sourceType":"module"}